<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸš€ ×¦×™×¨ ×”×–××Ÿ - ×”×ª×¤×ª×—×•×ª ××•×“×œ ×”×ª×</title>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet"/>
  <style>
    /* ×¢×™×¦×•×‘ ×‘×¡×™×¡×™ ×¢× × ×’×™×¢×•×ª ×©×œ ×¡×¨×§×–× */
    body {
      font-family: 'Heebo', sans-serif;
      font-size: 18px;
      background: linear-gradient(135deg, #f6f9fc 0%, #eef2f7 100%);
      margin: 0;
      padding: 0;
      text-align: center;
      overflow-x: hidden;
      color: #2d3748;
      min-height: 100vh;
    }
    h1 {
      font-size: 4rem;
      font-weight: 800;
      margin: 40px 0;
      background: linear-gradient(120deg, #2d3748, #4a5568);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      animation: fadeInDown 1.5s ease-out;
    }
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-30px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    /* ×¦×™×¨ ×”×–××Ÿ */
    .timeline-container {
      position: relative;
      width: 90%;
      max-width: 1200px;
      margin: auto;
      padding: 60px 0;
      min-height: 100vh;
    }
    .timeline-line {
      position: absolute;
      left: 50%;
      top: 0;
      bottom: 0;
      width: 4px;
      background: linear-gradient(to bottom, #3182ce, #63b3ed);
      transform: translateX(-50%);
      pointer-events: none;
      box-shadow: 0 0 10px rgba(49, 130, 206, 0.3);
    }
    .timeline-item {
      position: relative;
      width: 100%;
      margin: 80px 0;
      height: 60px;
      transition: all 0.3s ease;
    }
    .timeline-box {
      position: absolute;
      font-family: 'Open Sans', sans-serif;
      font-size: 1.25rem;
      font-weight: 600;
      background: linear-gradient(135deg, #4299e1, #667eea);
      color: #fff;
      padding: 16px 24px;
      border-radius: 12px;
      cursor: pointer;
      border: none;
      box-shadow: 0 4px 15px rgba(66, 153, 225, 0.2);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      width: auto;
      max-width: 300px;
      z-index: 1;
    }
    .timeline-box:hover {
      transform: translateY(-5px) scale(1.03);
      box-shadow: 0 8px 25px rgba(66, 153, 225, 0.3);
      background: linear-gradient(135deg, #3182ce, #5a67d8);
    }
    .timeline-item:nth-of-type(odd) .timeline-box {
      left: calc(50% + 30px);
    }
    .timeline-item:nth-of-type(even) .timeline-box {
      right: calc(50% + 30px);
    }
    /* ×—×œ×•×Ÿ ×”×¤×ª×™×—×” (××•×“××œ) */
    .expanded {
      position: fixed;
      width: 80%;
      height: 70%;
      top: 50%;
      left: 50%;
      background: linear-gradient(165deg, #2d3748, #4a5568);
      color: #fff;
      font-size: 1.2rem;
      padding: 30px;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
      border-radius: 24px;
      border: 2px solid rgba(255, 255, 255, 0.1);
      overflow: hidden;
      z-index: 1000;
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.95);
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      display: none;
    }
    .expanded.show {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
      display: block;
    }
    .expanded-title, .expanded-content {
      padding: 20px;
      font-size: 5rem;
      line-height: 1.4;
    }
    .expanded-title h2 {
      margin: 0;
      font-size: 6rem;
    }
    /* ×›×¤×ª×•×¨ ×”×¡×’×™×¨×” - ×”×’×•×œ×’×•×œ×ª (××§×•×¨×™) */
    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
      display: flex;
      justify-content: center;
      align-items: center;
      pointer-events: none;
    }
    .close-btn.show { display: flex; }
    .close-btn:hover {
      background: rgba(255,255,255,0.4);
    }
    .skull-icon {
      font-size: 67.5px; /* ×”×’×“×œ×” ×¤×™ 1.5 ×-45px */
      pointer-events: auto; 
      cursor: pointer;
    }
    /* ×©×›×‘×ª ×”×©××œ×” */
    #question-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(26,32,44,0.95);
      padding: 30px;
      border-radius: 16px;
      border: 2px solid rgba(255,255,255,0.1);
      box-shadow: 0 15px 30px rgba(0,0,0,0.3);
      width: 80%;
      max-width: 600px;
      text-align: center;
      display: none;
      z-index: 1100;
    }
    #question-overlay h3 {
      font-size: 1.5rem;
      margin-bottom: 20px;
    }
    .option-btn {
      display: block;
      margin: 10px auto;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      background: rgba(255,255,255,0.1);
      color: #fff;
      font-size: 1.2rem;
      cursor: pointer;
      transition: background 0.3s;
      width: 112%;
      max-width: 300px;
      border: 2px solid rgba(255,255,255,0.1);
    }
    .option-btn:hover {
      background: rgba(255,255,255,0.2);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    /* ×× ×™××¦×™×™×ª ×œ×•×–×¨ */
    .loser-animate {
      text-align: center;
      font-size: 2.2rem;
      color: #fbd38d;
      animation: bounce 1s cubic-bezier(0.4, 0, 0.2, 1) infinite alternate;
      margin-top: 20px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    @keyframes bounce {
      from { transform: translateY(0); }
      to { transform: translateY(-10px); }
    }
    /* ×”×•×“×¢×ª ×˜×¨×•×œ */
    #troll-message {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: #fbd38d;
      font-size: 1.4rem;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
      display: none;
    }
  </style>
</head>
<body>
  <h1>ğŸš€ ×¦×™×¨ ×”×–××Ÿ - ×”×ª×¤×ª×—×•×ª ××•×“×œ ×”×ª×</h1>

  <!-- ×¤×¨×™×˜×™ ×¦×™×¨ ×”×–××Ÿ -->
  <div class="timeline-container">
    <div class="timeline-line"></div>
    <div class="timeline-item">
      <button class="timeline-box"
              data-year="1590"
              data-title="××™×§×¨×•×¡×§×•×¤: ×¢×™× ×™×™× ×œ×¢×•×œ× × ×¡×ª×¨"
              data-content="××– ×ª×§×©×™×‘×•, ×‘××•×ª×” ×ª×§×•×¤×” ×”××—×™× ×™× ×¡×Ÿ ×”××¦×™××• ××ª ×”××™×§×¨×•×¡×§×•×¤ ×”×¨××©×•×Ÿ!<br />×–×” ×”×™×” ×›××• ×œ×§×‘×œ ×–×•×’ ×¢×™× ×™×™× ×©××¢×•×œ× ×œ× ×¨××™×ª× â€“ ×¤×ª××•×, ×¢×•×œ× × ×¡×ª×¨ × ×—×©×£.<br />×”×›×œ ×”×ª×—×™×œ ×‘×¡×§×¨× ×•×ª ××˜×•×¨×¤×ª, ×•×”××“×¢ ×¤×©×•×˜ ×–×– ×œ××§×•× ××—×¨.<br />×”×¨×‘×” ××“×‘×¨×™× ×¢×œ ×–×” ×¢×“ ×”×™×•×, ×›××™×œ×• ×–×” ×”×™×” ×”×§×¤×™×¦×” ×”×›×™ ××’× ×™×‘×”."
              data-audio="1740261600564t7rbdg8t-voicemaker.in-speech.mp3">
        1590
      </button>
    </div>
    <div class="timeline-item">
      <button class="timeline-box"
              data-year="1665"
              data-title="×ª×: ×”×¡×•×“ ×©×©×™× ×” ××ª ×”×›×œ"
              data-content="×‘×©× ×ª 1665, ×¨×•×‘×¨×˜ ×”×•×§ ×’×™×œ×” ××ª ×”××™×œ×” &quot;×ª×&quot; ×‘××™×§×¨×•×¡×§×•×¤!<br />×–×” ×”×™×” ×›××™×œ×• × ×¤×ª×— ×œ×›× ×¡×•×“ ×¢× ×§ ×©×œ ×”×˜×‘×¢ â€“ ×¤×©×•×˜ ×œ× ×™××•××Ÿ.<br />×”×—×‘×¨'×” ×‘×›×™×ª×” ×œ× ×”×¤×¡×™×§×• ×œ×“×‘×¨ ×¢×œ ×–×”, ×›××™×œ×• ×–×” ×”×™×” ×”×“×‘×¨ ×”×›×™ ××’× ×™×‘ ×©×§×•×¨×” ×‘×¢×•×œ×.<br />×›×œ ××” ×©×—×©×‘×ª× ×¢×“ ××–, ×¤×©×•×˜ ×”×ª×”×¤×š ×œ×¨××© ××—×¨×™ ×–×”."
              data-audio="1740261691594stp96qlb-voicemaker.in-speech.mp3">
        1665
      </button>
    </div>
    <div class="timeline-item">
      <button class="timeline-box"
              data-year="1674"
              data-title="×™×¦×•×¨×™× ×‘××™×: ××” ××¡×ª×ª×¨ ××ª×—×ª?"
              data-content="×‘×©× ×ª 1674, ×× ×˜×•× ×™ ×•××Ÿ ×œ×•×•× ×”×•×§ ×’×™×œ×” ×™×¦×•×¨×™× ×—×“-×ª××™×™× ×‘××™×!<br />×ª×—×©×‘×• ×¢×œ ×–×” â€“ ×‘×ª×•×š ×›×•×¡ ××™× ×¤×©×•×˜×”, ×¢×•×œ× ×—×“×© ×•××¤×ª×™×¢.<br />×”×—×‘×¨'×” ×‘×›×™×ª×” ×”×™×• ×¤×©×•×˜ ×‘×”×œ×, ×›×™ ××™ ×”×™×” ××××™×Ÿ ×©×™×© ×—×™×™× ×›×œ ×›×š ×–×¢×™×¨×™×?<br />×–×” ×”×™×” ×›××• ×œ×’×œ×•×ª ×¡×•×“ ×§×˜×Ÿ ×©×”×¤×š ××ª ×›×œ ××” ×©×™×“×¢× ×• ×¢×œ ×”×˜×‘×¢."
              data-audio="17402618305565sz1vbuk-voicemaker.in-speech.mp3">
        1674
      </button>
    </div>
    <div class="timeline-item">
      <button class="timeline-box"
              data-year="1838-1839"
              data-title="×ª×•×¨×ª ×”×ª×: ×”×¤××–×œ ×©×œ ×”×—×™×™×"
              data-content="×‘×©× ×™× 1838-1839, ×ª××•×“×•×¨ ×©×•×•××Ÿ ×•××ª×™××¡ ×©×œ×™×™×“×Ÿ ×›×ª×‘×• ××ª ×ª×•×¨×ª ×”×ª×.<br />×”× ×’×™×œ×• ×©×›×œ ×™×¦×•×¨ ×—×™ ××•×¨×›×‘ ××ª××™× â€“ ×›××™×œ×• ×›×œ ×“×‘×¨ ×”×•× ×¤××–×œ ×¢× ×§×™.<br />×”××“×¢ ×”×ª×—×™×œ ×œ×”×‘×™×Ÿ ××ª ×”×¡×•×“ ×©×××—×•×¨×™ ×”×—×™×™×, ×•×”×›×œ ×”×¤×š ×œ×•×’×™ ×™×•×ª×¨.<br />×–×” ×”×™×” ×›××• ×œ×§×‘×œ ××ª ×”××“×¨×™×š ×”×¡×•×“×™ ×œ×—×™×™×, ×¤×©×•×˜ ××“×”×™×."
              data-audio="1740261715130myobmbex9-voicemaker.in-speech.mp3">
        1838-1839
      </button>
    </div>
    <div class="timeline-item">
      <button class="timeline-box"
              data-year="1855"
              data-title="×›×œ ×ª× ××ª×: ×¤×™×¦×•×¥ ×”××•×—"
              data-content="×‘×©× ×ª 1855, ×¨×•×“×•×œ×£ ×•×™×¨×›×• ×××¨ &quot;×›×œ ×ª× ××ª×&quot; â€“ ×•×–×” ×¤×©×•×˜ ×”×¤×š ××ª ×›×œ ××” ×©×™×“×¢× ×•.<br />×”×•× ×”×¡×‘×™×¨ ×©×›×œ ×ª× × ×•×¦×¨×™× ××ª××™× ×§×™×™××™×, ×•×”×›×œ ×”×ª×—×‘×¨ ×‘×¦×•×¨×” ××˜×•×¨×¤×ª.<br />×”×—×‘×¨'×” ×‘×›×™×ª×” ×œ× ×”×××™× ×• â€“ ×–×” ×”×™×” ×›××™×œ×• ×›×œ ×”×¢×•×œ× ×§×™×‘×œ ×¢×“×›×•×Ÿ ××˜×•×¨×£.<br />×–×” ×©×™× ×” ××ª ×”×“×¨×š ×‘×” ×× ×• ××‘×™× ×™× ××ª ××—×–×•×¨ ×”×—×™×™×."
              data-audio="1740261896541btp2cuob-voicemaker.in-speech.mp3">
        1855
      </button>
    </div>
    <div class="timeline-item">
      <button class="timeline-box"
              data-year="1931"
              data-title="×”××™×§×¨×•×¡×§×•×¤ ×”××œ×§×˜×¨×•× ×™: ×œ×¨××•×ª ×›××• ×—×œ×•×"
              data-content="×‘×©× ×ª 1931, ×”×™×™× ×¨×™×š ×¨×•×–×” ×•××¨× ×¡×˜ ×¨×¡×§×” ×”××¦×™××• ××ª ×”××™×§×¨×•×¡×§×•×¤ ×”××œ×§×˜×¨×•× ×™ ×”×¨××©×•×Ÿ.<br />×”× ×™×›×œ×• ×œ×”×’×“×™×œ ×¢×“ ×›×“×™ ×›×š ×©×›×œ ×“×‘×¨ × ×¨××” ×›××• ××©×”×• ××”×—×œ×œ â€“ ×¤×©×•×˜ ××˜×•×¨×£.<br />×–×” ×”×™×” ×›××™×œ×• ×§×™×‘×œ×ª× ×¢×™× ×™×™× ×§×¡×•××•×ª ×œ×¨××•×ª ××ª ××” ×©××™ ××¤×©×¨ ×œ×“××™×™×Ÿ.<br />×”××¦××” ×–×• ×©×™× ×ª×” ××ª ×›×œ×œ×™ ×”××©×—×§ ×‘×¢×•×œ× ×”××—×§×¨, ×××© ×—×œ×•× ×©××ª×’×©×."
              data-audio="17402622570449k5yt06s-voicemaker.in-speech.mp3">
        1931
      </button>
    </div>
    <div class="timeline-item">
      <button class="timeline-box"
              data-year="1953"
              data-title="DNA: ×”×§×•×“ ×”×¡×•×“×™"
              data-content="×‘×©× ×ª 1953, ×’×³×™×™××¡ ×•×•×˜×¡×•×Ÿ ×•×¤×¨× ×¡×™×¡ ×§×¨×™×§ ×’×™×œ×• ××ª ××‘× ×” ×”-DNA.<br />×ª×—×©×‘×• â€“ ×–×” ×”×™×” ×›××• ×œ×’×œ×•×ª ×§×•×“ ×¡×•×“×™ ×©×©×•×œ×˜ ×‘×›×œ ××” ×©×§×•×¨×” ×‘×’×•×¤× ×•.<br />×”×’×™×œ×•×™ ×”×–×” ×¤×ª×— ×“×œ×ª ×œ×¢×•×œ× ×—×“×© ×©×œ ×’× ×˜×™×§×” ×•×‘×™×•×œ×•×’×™×”, ×××© ×›××• ×§×¡×.<br />×›×œ ×”×—×‘×¨'×” ×‘×›×™×ª×” ×¤×©×•×˜ ×××¨×• &quot;×•×•××•&quot;, ×›×™ ×–×” ×”×™×” ×©×™× ×•×™ ××•×—×œ×˜."
              data-audio="1740262536420kzutfxyf-voicemaker.in-speech.mp3">
        1953
      </button>
    </div>
    <div class="timeline-item">
      <button class="timeline-box"
              data-year="1981"
              data-title="×× ×“×•×¡×™××‘×™×•×–×”: ×¤××–×œ ×”×ª×"
              data-content="×‘×©× ×ª 1981, ×œ×™×Ÿ ××¨×’×•×œ×™×¡ ×”×¦×™×¢×” ××ª ×ª×™××•×¨×™×™×ª ×”×× ×“×•×¡×™××‘×™×•×–×”.<br />×”×™× ×”×¡×‘×™×¨×” ××™×š ×”××‘×¨×•× ×™× ×‘×ª××™× ×”×’×™×¢×• â€“ ×›××™×œ×• ×›×œ ×”×—×œ×§×™× ×”×ª×—×‘×¨×• ×‘×¦×•×¨×” ××•×©×œ××ª.<br />×–×” ×”×™×” ×›××• ×œ×”×¨×›×™×‘ ×¤××–×œ ×¢× ×§×™ ×©×‘×• ×›×œ ×—×œ×§ ××©×ª×œ×‘ ×‘×“×™×•×§ ×‘××§×•× ×©×œ×•.<br />×”×—×‘×¨'×” ×‘×›×™×ª×” ×¤×©×•×˜ ×œ× ×”×¤×¡×™×§×• ×œ×¦×—×•×§ â€“ ×–×” ×”×™×” ×××© ××”×¤×›× ×™!"
              data-audio="1740262579936hdc4uxqb-voicemaker.in-speech.mp3">
        1981
      </button>
    </div>
  </div>

  <!-- ×—×œ×•×Ÿ ×”×¤×ª×™×—×” (××•×“××œ) -->
  <div id="expanded-box" class="expanded">
    <div class="close-btn" id="close-btn">
      <span class="skull-icon" id="skull-icon">ğŸ’€</span>
    </div>
    <div class="expanded-title"></div>
    <div class="expanded-content" id="expanded-content"></div>
    <!-- ×©×›×‘×ª ×”×©××œ×” -->
    <div id="question-overlay">
      <h3 id="question-text"></h3>
      <div id="options-container"></div>
    </div>
    <!-- ×”×•×“×¢×ª ×˜×¨×•×œ -->
    <div id="troll-message"></div>
  </div>

  <script>
    /* ×¤×•× ×§×¦×™×™×ª ×”×§×œ×“×” (Typewriter Effect) */
    function typeText(element, text, delay, callback) {
      let i = 0;
      element.innerHTML = "";
      function type() {
        if (i < text.length) {
          if (text[i] === "<") {
            let endTag = text.indexOf(">", i);
            if (endTag !== -1) {
              element.innerHTML += text.substring(i, endTag + 1);
              i = endTag + 1;
            } else {
              element.innerHTML += text[i];
              i++;
            }
          } else {
            element.innerHTML += text[i];
            i++;
          }
          setTimeout(type, delay);
        } else if (callback) {
          callback();
        }
      }
      type();
    }

    /* ========== ××©×ª× ×™× ×’×œ×•×‘×œ×™×™× ========== */
    let currentStep = 0;
    let currentTitle = "";
    let currentContent = "";
    let currentKey = "";
    let keyListenerAdded = false;
    let currentAudio = null; // Voice â€“ ×§×•×‘×¥ ×§×•×œ (×× ×§×™×™×)

    let teleportInterval = null;  // ×¢×‘×•×¨ ×ª× ×•×¢×ª ×”×˜×œ×¤×•×¨×˜ ×©×œ ×”×’×•×œ×’×•×œ×ª
    let hardModeTimeouts = [];    // ×œ××—×¡×•×Ÿ ×˜×™×™××¨×™× ×‘××¦×‘ ×§×•×©×™
    let hardModeActive = false;   // ×“×’×œ ×œ××¦×‘ ×§×•×©×™
    let difficultyLevel = 1;      // ×¨××ª ×§×•×©×™ ×¤× ×™××™×ª (×œ× ××•×¦×’×ª)

    /* ========== × ×ª×•× ×™ ×”×©××œ×•×ª ========== */
    const questions = {
      "1590": {
        "question": "×›×™×¦×“ ×”××¦××ª ×”××™×§×¨×•×¡×§×•×¤ ×—×•×œ×œ×” ×©×™× ×•×™ ×‘×ª×¤×™×¡×ª ×”'×‘×œ×ª×™ × ×¨××”' ×‘×¢×•×œ× ×”××“×¢×™, ×•××”×• ×”×”×™×‘×˜ ×”×§×¨×™×˜×™ ×©×Ö´×¤×©×¨ ××ª ×”××¢×‘×¨ ××ª×¦×¤×™×ª ××™× ×˜×•××™×˜×™×‘×™×ª ×œ×”×‘× ×” ××¢×¨×›×ª×™×ª ×©×œ ×”××‘× ×” ×”××™×§×¨×•×¡×§×•×¤×™?",
        "options": [
          "×”××™×§×¨×•×¡×§×•×¤ ××™×¤×©×¨ ×”×‘×—× ×” ××“×•×™×§×ª ×‘××‘× ×™× ×ª×ª-×ª××™×™×, ×•×‘×›×š ×”× ×™×— ×ª×©×ª×™×ª ×œ×’×™×©×•×ª ×›××•×ª×™×•×ª ×—×“×©×•×ª ×œ×”×‘× ×ª ×ª×”×œ×™×›×™× ×‘×™×•×œ×•×’×™×™× ××‘× ×™×™× ×•×¤×•× ×§×¦×™×•× ×œ×™×™×.",
          "×”××™×§×¨×•×¡×§×•×¤ ×”×¢×¦×™× ××ª ×™×›×•×œ×ª ×”×”×’×“×œ×”, ××š ×”×‘× ×ª ×”××‘× ×” ×”××™×§×¨×•×¡×§×•×¤×™ × ×•×ª×¨×” ×ª×œ×•×™×” ×‘×¢×™×§×¨ ×‘×’×™×©×•×ª ×¤×™×œ×•×¡×•×¤×™×•×ª ×§×•×“××•×ª ×•×œ× ×”×•×‘×™×œ×” ×œ×¤×¨×“×™×’××” ×—×“×©×”.",
          "×”××¦××ª ×”××™×§×¨×•×¡×§×•×¤ ×”×‘×™××” ×œ××”×¤×›×” ×˜×›× ×•×œ×•×’×™×ª, ××š ×”×”×‘× ×” ×”×ª××•×¨×˜×™×ª ×©×œ ×”×ª×•×¤×¢×•×ª ×”×ª×ª-××™×§×¨×•×¡×§×•×¤×™×•×ª ×œ× ×”×©×ª× ×ª×” ×¢×“ ×œ×”×•×¤×¢×ª ×”×’× ×˜×™×§×” ×”××•×œ×§×•×œ×¨×™×ª.",
          "×”××™×§×¨×•×¡×§×•×¤ ×™×¦×¨ ××¤×©×¨×•×™×•×ª ×ª×¦×¤×™×ª ×—×“×©×•×ª ××š ×œ× ×”×©×¤×™×¢ ×¢×œ ×”××ª×•×“×•×œ×•×’×™×•×ª ×©×œ ×”××—×§×¨ ×”××“×¢×™, ×©× ×•×ª×¨×• ××•×©×ª×ª×•×ª ×¢×œ ×¢×§×¨×•× ×•×ª ×××§×¨×•×¡×§×•×¤×™×™×."
        ],
        "correct": 0
      },
      "1665": {
        "question": "×›×™×¦×“ ×ª×¨× ×”××•× ×— '×ª×' ×œ×”××©×’×ª ×”××¨×’×•×Ÿ ×”××•×¨×’× ×™ ×‘××¢×¨×›×ª ×”×‘×™×•×œ×•×’×™×ª, ×•××”×• ×”×’×•×¨× ×”××”×•×ª×™ ×©×’×¨× ×œ×©×™× ×•×™ ××”×•×ª×™ ×‘×”×‘× ×” ×©×œ ××‘× ×” ×•×ª×¤×§×•×“ ××¢×¨×›×•×ª ×‘×™×•×œ×•×’×™×•×ª?",
        "options": [
          "×”×’×“×¨×ª ×”×ª× ×›×™×—×™×“×” ×”×‘×¡×™×¡×™×ª ×©×œ ×”×—×™×™× ××¤×©×¨×” ××¢×‘×¨ ××ª×™××•×¨ ××™×›×•×ª× ×™ ×œ×”×‘× ×” ×›××•×ª×™×ª ×©×œ ×”×“×™× ××™×§×” ×”×ª××™×ª ×•×™×—×¡×™ ×”×’×•××œ×™×Ÿ ×‘×™×Ÿ ×”××‘× ×™× ×”×ª×•×š-×ª××™×™×.",
          "×”×’×“×¨×ª ×”×ª× ×›×™×—×™×“×” ×‘×¡×™×¡×™×ª ××× × ×§×™×“××” ××ª ×”×”×‘× ×” ×©×œ ××¨×’×•×Ÿ ××•×¨×’× ×™×–××™×, ××š ×”×”×©×œ×›×•×ª ×©×œ ×”×”×’×“×¨×” × ×•×ª×¨×• ××•×’×‘×œ×•×ª ×œ×ª×¦×¤×™×•×ª ××‘× ×™×•×ª ×‘×œ×‘×“.",
          "×”××•× ×— '×ª×' ×©×™××© ×‘×¢×™×§×¨ ×›××•× ×— ×¡×× ×˜×™ ×œ×ª×™××•×¨ ××‘× ×™× ×¤× ×™××™×™× ×œ×œ× ×¢×“×•×ª ×××¤×™×¨×™×ª ××¡×¤×§×ª ×œ×©×™×œ×•×‘× ×‘××¢×¨×›×•×ª ×‘×™×•×œ×•×’×™×•×ª ××•×¨×›×‘×•×ª.",
          "×”×’×“×¨×ª ×”×ª× ×”×™×•×•×ª×” ×¦×¢×“ ×—×©×•×‘ ×‘×¤×™×ª×•×— ×”×™×“×¢ ×”×‘×™×•×œ×•×’×™, ××š ×”××•× ×— × ×•×ª×¨ ×—×¡×¨ ××©××¢×•×ª ×¤×¨×§×˜×™×ª ×‘××—×§×¨ ×”×‘×™×•×œ×•×’×™ ×¢×“ ×œ×”×ª×¤×ª×—×•×ª ×”××™×§×¨×•×¡×§×•×¤ ×”××œ×§×˜×¨×•× ×™."
        ],
        "correct": 0
      },
      "1674": {
        "question": "×›×™×¦×“ ×’×™×œ×•×™ ×”××•×¨×’× ×™×–××™× ×”×—×“-×ª××™×™× ×”×•×‘×™×œ ×œ×©×™× ×•×™ ××©××¢×•×ª×™ ×‘×¤×¨×“×™×’××•×ª ×”××“×¢×™×•×ª ×©×œ ×”×ª×§×•×¤×”, ×•××”×• ×”×”×™×‘×˜ ×”×ª×¤×™×¡×ª×™ ×”××¨×›×–×™ ×©×”×•×©×¤×¢ ××”×ª×¦×¤×™×•×ª ×”×œ×œ×•?",
        "options": [
          "×’×™×œ×•×™ ××•×¨×’× ×™×–××™× ×—×“-×ª××™×™× ×”×‘×™× ×œ×”×‘× ×” ××—×•×“×©×ª ×©×œ ××•×¨×›×‘×•×ª ××‘× ×™×ª ×‘×¨××” ×”××™×§×¨×•×¡×§×•×¤×™×ª, ××” ×©×”×•×‘×™×œ ×œ×“×™×•×Ÿ ××—×•×“×© ×‘× ×•×’×¢ ×œ×”×’×“×¨×ª '×—×™×™×' ×‘××•× ×—×™× ×‘×™×•×œ×•×’×™×™× ×¤×•× ×§×¦×™×•× ×œ×™×™×.",
          "×œ××¨×•×ª ×’×™×œ×•×™ ×”×™×¦×•×¨×™× ×”×—×“-×ª××™×™×, ×”×”× ×—×•×ª ×”××“×¢×™×•×ª ×©×œ ×”×ª×§×•×¤×” × ×•×ª×¨×• ××‘×•×¡×¡×•×ª ×¢×œ ×¢×§×¨×•× ×•×ª ×‘×™×•×œ×•×’×™×™× ×××§×¨×•×¡×§×•×¤×™×™× ××‘×œ×™ ×œ×”×›×™×¨ ×‘××©××¢×•×ª× ×©×œ ×××¦××™× ××™×§×¨×•×¡×§×•×¤×™×™×.",
          "×”×—×©×™×¤×” ×œ××•×¨×’× ×™×–××™× ×—×“-×ª××™×™× ×—×™×“×“×” ××ª ×”×¦×•×¨×š ×‘××ª×•×“×•×œ×•×’×™×•×ª ×—×“×©×•×ª, ××š ×”×¤×¨×“×™×’××” ×”××“×¢×™×ª ×œ× ×”×©×ª× ×ª×” ×‘××•×¤×Ÿ ×××©×™ ×¢×“ ×”×•×¤×¢×ª ×ª×•×¨×ª ×”××‘×•×œ×•×¦×™×”.",
          "×’×™×œ×•×™ ×—×“-×ª××™×™× ×”×¦×™×’ ×“×™×œ××•×ª ×ª××•×¨×˜×™×•×ª, ××š ××¨×‘×™×ª ×”×—×•×§×¨×™× ×”××©×™×›×• ×œ×¨××•×ª ×‘×”× ×—×¨×™×’×™× ×œ××‘× ×™× ×”×‘×™×•×œ×•×’×™×™× ×”××§×•×‘×œ×™× ×•×œ× ×©×™× ×• ××ª ××•×“×œ ×”×—×™×™× ×©×œ×”×."
        ],
        "correct": 0
      },
      "1838-1839": {
        "question": "×›×™×¦×“ ×ª×•×¨×ª ×”×ª× ×”×’×“×™×¨×” ××—×“×© ××ª ××•×©×’ ×”××¨×’×•×Ÿ ×”×‘×™×•×œ×•×’×™, ×•××” ×”×™×™×ª×” ×”×ª×•×‘× ×” ×”××¨×›×–×™×ª ×©×©×™× ×ª×” ××ª ××•×¤×Ÿ ×”×—×©×™×‘×” ×¢×œ ×™×—×™×“×•×ª ×”×‘×¡×™×¡ ×©×œ ×”×—×™×™×?",
        "options": [
          "×ª×•×¨×ª ×”×ª× ×§×‘×¢×” ×©×›×œ ×”×™×¦×•×¨×™× ×”×—×™×™× ××•×¨×›×‘×™× ××ª××™× ×›×™×—×™×“×•×ª ××‘× ×™×•×ª ×•×ª×¤×§×•×“×™×•×ª, ×•×‘×›×š ×”× ×™×—×” ××ª ×”×‘×¡×™×¡ ×œ×”×‘× ×” ××¢×¨×›×ª×™×ª ×©×œ ×ª×”×œ×™×›×™× ×‘×™×•×œ×•×’×™×™×.",
          "×”×ª×™××•×¨×™×” ×”×“×’×™×©×” ××ª ×”×ª×¦×¤×™×ª ×”××‘× ×™×ª ×©×œ ×ª××™× ××š ×œ× ×”×¦×œ×™×—×” ×œ×’×‘×© ×’×™×©×” ×›×•×œ×œ×ª ×œ×”×¡×‘×¨ ×“×™× ××™×§×•×ª ×©×œ ××¢×¨×›×•×ª ×‘×™×•×œ×•×’×™×•×ª ××•×¨×›×‘×•×ª.",
          "×”×’×“×¨×ª ×”×ª× ×›×™×—×™×“×” ×‘×¡×™×¡×™×ª ×©×œ ×”××•×¨×’× ×™×–× ××× × ×ª×¨××” ×œ×”×‘× ×ª ××‘× ×” ×”×—×™×™×, ××š ×”×”×©×¤×¢×” ×©×œ×” ×¢×œ ×”×ª×¤×™×¡×” ×”×¤×™×–×™×•×œ×•×’×™×ª ×©×œ ×”×ª× ×”×™×™×ª×” ××•×’×‘×œ×ª.",
          "×œ××¨×•×ª ×ª×¨×•××ª×” ×©×œ ×ª×•×¨×ª ×”×ª×, ×”×ª×¤×™×¡×” ×©×œ ××•×¨×’× ×™×–××™× ×›×™×—×™×“×•×ª ××©×•×œ×‘×•×ª ×œ× ×”×©×ª× ×ª×” ×‘××•×¤×Ÿ ××”×•×ª×™ ×¢×“ ×œ×¤×™×ª×•×— ×”×‘×™×•×œ×•×’×™×” ×”××•×œ×§×•×œ×¨×™×ª."
        ],
        "correct": 0
      },
      "1855": {
        "question": "×‘××™×–×” ××•×¤×Ÿ ×—×™×–×§ ×”×¢×™×§×¨×•×Ÿ '×›×œ ×ª× ××ª×' ××ª ×”×‘× ×ª ×”×× ×’× ×•× ×™× ×©×œ ××—×–×•×¨ ×”×—×™×™× ×”×‘×™×•×œ×•×’×™, ×•××”×• ×”××•×¤×Ÿ ×©×‘×• ×”×•× ×”×©×¤×™×¢ ×¢×œ ×ª×¤×™×¡×•×ª ×”×”×ª×¤×ª×—×•×ª ×”××•×¨×’× ×™×ª?",
        "options": [
          "×”×¢×™×§×¨×•×Ÿ ××™×©×© ××ª ×”×”××©×›×™×•×ª ×©×œ ×”×ª××™× ×›×—×œ×§ ××× ×’× ×•× ×™ ×”×”×ª×¨×‘×•×ª ×•×”×—×™×“×•×© ×”×‘×™×•×œ×•×’×™, ×ª×•×š ×”×“×’×©×ª ×”×§×©×¨ ×‘×™×Ÿ ×©×™××•×¨ ×”××™×“×¢ ×”×ª××™ ×œ×”×ª×¤×ª×—×•×ª ××•×¨×’× ×™×–××™×.",
          "×”×¢×™×§×¨×•×Ÿ ×”×¦×‘×™×¢ ×¢×œ ×›×š ×©×ª×”×œ×™×›×™× ×ª××™×™× ××‘×•×¡×¡×™× ×¢×œ ×”××©×›×™×•×ª, ××š ×”×©×¤×¢×ª×• ×¢×œ ×”×‘× ×ª ×”×”×ª×¤×ª×—×•×ª ×”×‘×™×•×œ×•×’×™×ª ×”×™×™×ª×” ××¦×•××¦××ª ×œ×ª×—×•× ×”××™×§×¨×•×¡×§×•×¤×™ ×‘×œ×‘×“.",
          "×œ××¨×•×ª ×©×”×¢×™×§×¨×•×Ÿ ××“×’×™×© ××ª ××—×–×•×¨×™×•×ª ×”×ª×, ×”×‘× ×ª ×”×× ×’× ×•×Ÿ ×”×××¤×©×¨ ××ª ×”×ª×—×“×©×•×ª× × ×•×ª×¨×” ××•×’×‘×œ×ª ×œ×”× ×—×•×ª ××‘× ×™×•×ª ×‘×œ×‘×“.",
          "×”×”×›×¨×” ×‘×›×š ×©×›×œ ×ª× × ×•×‘×¢ ××ª× ××—×¨ ×¡×™×¤×§×” ××¡×’×¨×ª ××—×§×¨×™×ª, ××š ×œ× ×”×‘×™××” ×œ×©×™× ×•×™ ××”×•×ª×™ ×‘×’×™×©×” ×œ×”×‘× ×ª ×”×”×ª×¤×ª×—×•×ª ×”××•×¨×’× ×™×ª."
        ],
        "correct": 0
      }
    };

    // ×œ×—×™×¦×” ×¢×œ ×›×¤×ª×•×¨×™ ×¦×™×¨ ×”×–××Ÿ â€“ ×¤×•×ª×—×ª ××ª ×”××•×“××œ ×•×××ª×—×œ×ª ××ª ×§×•×‘×¥ ×”×§×•×œ (Voice) ×‘××™×“×” ×•×§×™×™×
    document.querySelectorAll('.timeline-box').forEach(box => {
      box.addEventListener('click', function() {
        currentKey = this.dataset.year;
        currentTitle = this.dataset.title;
        currentContent = this.dataset.content;
        if(this.dataset.audio){
          currentAudio = new Audio(this.dataset.audio);
        } else {
          currentAudio = null;
        }
        openModal();
      });
    });

    function openModal() {
      currentStep = 0;
      document.querySelector('.expanded-title').innerHTML = "";
      document.querySelector('.expanded-content').innerHTML = "";
      const expandedBox = document.getElementById('expanded-box');
      expandedBox.classList.add('show');
      clearHardMode();
      hardModeActive = false;
      const closeBtnCircle = document.getElementById('close-btn');
      closeBtnCircle.style.position = "";
      closeBtnCircle.style.left = "";
      closeBtnCircle.style.top = "";
      const skullIcon = document.getElementById('skull-icon');
      skullIcon.style.display = 'inline';
      skullIcon.onclick = onSkullClick;
      if (!keyListenerAdded) {
        document.addEventListener('keydown', spaceHandler);
        keyListenerAdded = true;
      }
      closeBtnCircle.classList.add('show');
    }

    // ××¦×™×’ ××ª ×”×›×•×ª×¨×ª ×•×”×ª×•×›×Ÿ ×‘×©×œ×‘×™× ×¢× ××¤×§×˜ ×”×§×œ×“×”
    function spaceHandler(e) {
      if (e.code === 'Space') {
        e.preventDefault();
        if (currentStep === 0) {
          typeText(document.querySelector('.expanded-title'), "<h2>" + currentTitle + "</h2>", 50, function() {
            currentStep = 1;
          });
        } else if (currentStep === 1) {
          if (currentAudio) { currentAudio.play(); }
          typeText(document.querySelector('.expanded-content'), "<p>" + currentContent + "</p>", 50, function() {
            currentStep = 2;
            document.removeEventListener('keydown', spaceHandler);
            keyListenerAdded = false;
          });
        }
      }
    }

    // ×œ×—×™×¦×” ×¢×œ ×”×’×•×œ×’×•×œ×ª â€“ ×× ×‘××¦×‘ hard mode ×¡×•×’×¨×™×, ××—×¨×ª ××¦×™×’×™× ××ª ×”×—×™×“×•×Ÿ
    function onSkullClick(e) {
      e.stopPropagation();
      const skullIcon = document.getElementById('skull-icon');
      const trollMessageDiv = document.getElementById('troll-message');
      if (hardModeActive) {
        clearHardMode();
        closeModal();
      } else {
        if (trollMessageDiv.style.display === 'block') {
          trollMessageDiv.style.display = 'none';
        }
        difficultyLevel++;
        showQuestionOverlay();
      }
    }

    function showQuestionOverlay() {
      document.querySelector('.expanded-title').style.display = 'none';
      document.querySelector('.expanded-content').style.display = 'none';
      const overlay = document.getElementById('question-overlay');
      overlay.style.display = 'block';
      const qData = questions[currentKey];
      if (!qData) { closeModal(); return; }
      document.getElementById('question-text').innerHTML = qData.question;
      const optionsContainer = document.getElementById('options-container');
      optionsContainer.innerHTML = "";
      // ××¢×¨×‘×‘×™× ××ª ×›×œ ××¨×‘×¢ ×”××¤×©×¨×•×™×•×ª ×‘××•×¤×Ÿ ×¨× ×“×•××œ×™
      let opts = qData.options.slice();
      for (let i = opts.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [opts[i], opts[j]] = [opts[j], opts[i]];
      }
      opts.forEach(optionText => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.textContent = optionText;
        btn.onclick = () => {
          overlay.style.display = 'none';
          document.querySelector('.expanded-title').style.display = 'block';
          document.querySelector('.expanded-content').style.display = 'block';
          if (optionText === qData.options[0]) {
            closeModal();
          } else {
            showLoserMessage();
          }
        };
        optionsContainer.appendChild(btn);
      });
    }

    // ×¤×•× ×§×¦×™×™×ª ×”×§×œ×“×” (Typewriter Effect)
    function typeText(element, text, delay, callback) {
      let i = 0;
      element.innerHTML = "";
      function type() {
        if (i < text.length) {
          if (text[i] === "<") {
            let endTag = text.indexOf(">", i);
            if (endTag !== -1) {
              element.innerHTML += text.substring(i, endTag + 1);
              i = endTag + 1;
            } else {
              element.innerHTML += text[i];
              i++;
            }
          } else {
            element.innerHTML += text[i];
            i++;
          }
          setTimeout(type, delay);
        } else if (callback) {
          callback();
        }
      }
      type();
    }

    // ×‘××§×¨×” ×©×œ ×ª×©×•×‘×” ×©×’×•×™×” â€“ ××¦×™×’×™× ×”×•×“×¢×ª "×œ×•×–×¨"
    function showLoserMessage() {
  const messages = [
    "×œ×•×–×¨, ×œ×•×–×¨ ğŸ˜œ",
    "× ×™×¡×™×•×Ÿ × ×—××“... ××‘×œ ×›×©×œ×•×Ÿ ××¨×”×™×‘! ğŸ¤¡",
    "××•×™ ×œ×, ××•×œ×™ ×‘×¤×¢× ×”×‘××” ×ª×©×ª××© ×‘×§×¦×ª ×©×›×œ? ğŸ¤”",
    "×¤×¡×¤×¡×ª! ××‘×œ ××œ ×ª×“××’, ×’× ×× ×™ ×¢×•×©×” ×˜×¢×•×™×•×ª... ××”, ×‘×¢×¦× ×œ×. ğŸ˜†",
    "×‘×™× ×’×•! ×›×œ×•××¨... ×”×”×¤×š ××‘×™× ×’×•. ğŸ¯âŒ",
    "×§×¨×•×‘... ×œ×, ×‘×¢×¦× ×œ× ×§×¨×•×‘ ×‘×›×œ×œ. ğŸ˜",
    "××™×©×”×• ×¦×¨×™×š ×œ×—×–×•×¨ ×œ×›×™×ª×” ×' ğŸ“šğŸ˜‚",
    "×•×•××•, ××¤×™×œ×• ×”×‘×¨×•×•×– ×©×œ×™ ×¢×•× ×” ×™×•×ª×¨ ×˜×•×‘ ××–×”. ğŸ¦†",
    "×× ×”×™×™×ª×™ ××§×‘×œ ×©×§×œ ×¢×œ ×›×œ ×˜×¢×•×ª ×©×œ×š, ×”×™×™×ª×™ ××™×œ×™×•× ×¨ ×¢×›×©×™×•. ğŸ’¸",
    "×™×© ×œ×š ×¤×•×˜× ×¦×™××œ... ×©×œ ×¡×œ×¢. ğŸª¨",
    "××œ ×ª×“××’, ×™×© ×›××œ×” ×©× ×•×œ×“×• ×—×›××™×, ×•×™×© ×›××œ×”... ×›××•×š. ğŸ¤·â€â™‚ï¸",
    "×‘×¤×¢× ×”×‘××”, ××•×œ×™ ×ª× ×¡×” ×œ×§×¨×•× ××ª ×”×©××œ×” ×œ×¤× ×™ ×©×¢×•× ×™×? ğŸ“–",
    "×•×•××•, ×–×• ×”×™×™×ª×” ×ª×©×•×‘×” ×‘×¨××” ×©×œ ×˜×•×¡×˜×¨ ××§×•×œ×§×œ. ğŸğŸ”¥",
    "×”×ª×©×•×‘×” ×©×œ×š ×©×‘×¨×” ×œ×™ ××ª ×”×œ×‘... ×•××ª ×—×•×§×™ ×”×”×™×’×™×•×Ÿ. ğŸ’”ğŸ¤¯",
    "×‘×‘×§×©×”, ×ª×¤×¡×™×§, ×× ×™ ××ª×—×™×œ ×œ×”×¨×’×™×© ××‘×•×›×” ×‘×©×‘×™×œ×š. ğŸ˜…",
    "×”××•×¨×” ×©×œ×š ×›×¨×’×¢ ×‘×•×›×” ×‘×¤×™× ×” ×‘×’×œ×œ×š. ğŸ˜­",
    "×—×™×“×”: ××” ×“×•××” ×œ×š ×•×œ×“×œ×ª? ×©× ×™×›× ×œ× ×—×›××™× ×‘××™×•×—×“. ğŸšª",
    "×œ× × ×•×¨×... ×ª××™×“ ×™×© ×§×¨×™×™×¨×” ×‘×ª×•×¨ ×¤×— ××©×¤×”. ğŸ—‘ï¸",
    "××” ×©×¢× ×™×ª ×¢×›×©×™×•? ×–×” ×›× ×¨××” ×™×”×™×” ×‘×“×™×—×” ×‘×¤×¡×™×›×•××˜×¨×™ ×”×‘×. ğŸ¤¦â€â™‚ï¸",
    "×ª××©×™×š ×›×›×”, ×•×‘×§×¨×•×‘ ×™×”×™×• ×œ×š ×× ×•×™ ×—×™× × ×œ××•× ×™×‘×¨×¡×™×˜×ª ×›×©×œ×•× ×•×ª! ğŸ“âŒ",
    "×× ×™ ××ª×—×™×œ ×œ×—×©×•×‘ ×©××ª×” ×¢×•×©×” ××ª ×–×” ×‘×›×•×•× ×”... × ×›×•×Ÿ? ğŸ§",
    "×©××¢×ª×™ ×©×’××•× ×•×ª ×”×™× ×¢× ×™×™×Ÿ ×’× ×˜×™... ×›× ×¨××” ×©××™×Ÿ ×œ×š ××–×œ. ğŸ¤·â€â™€ï¸",
    "××•×œ×™ ×ª× ×¡×” ×œ×©××•×œ ××ª ×”×›×œ×‘ ×©×œ×š ×‘×¤×¢× ×”×‘××”? ×™×© ××¦×‘ ×©×”×•× ×™×•×“×¢ ×™×•×ª×¨. ğŸ¶",
    "×›××¢×˜! ×›×œ×•××¨, ×œ× ×‘×××ª. ××‘×œ ×× ×™ ×× ×¡×” ×œ×”×™×•×ª × ×—××“. ğŸ˜¬"
  ];
  
  const expandedBox = document.getElementById('expanded-box');
  const loserDiv = document.createElement('div');
  loserDiv.className = 'loser-animate';
  loserDiv.innerHTML = messages[Math.floor(Math.random() * messages.length)];
  expandedBox.appendChild(loserDiv);
  
  setTimeout(() => {
    loserDiv.remove();
    startHardMode();
  }, 3000);
}

    // ××¦×‘ hard mode: ×”×’×•×œ×’×•×œ×ª ××ª×¨×•×¦×¦×ª ×‘×ª×•×š ×—×œ×•×Ÿ ×”××•×“××œ, ×•×”×˜×§×¡×˜ × ×¢×œ×
    function startHardMode() {
      document.querySelector('.expanded-title').style.display = 'none';
      document.querySelector('.expanded-content').style.display = 'none';
      hardModeActive = true;
      const closeBtnCircle = document.getElementById('close-btn');
      // ×”××˜×ª ×ª× ×•×¢×ª ×”×’×•×œ×’×•×œ×ª - ××¢×‘×¨ ×›×œ 700 ×"×© (×œ×¢×•××ª 340 ×"×© ×§×•×“×)
      teleportInterval = setInterval(moveSkull, 400);
      let timeout = setTimeout(() => {
        clearInterval(teleportInterval);
        teleportInterval = null;
        hardModeActive = false;
        showTrollMessage();
      }, 15000);
      hardModeTimeouts.push(timeout);
    }

    function moveSkull() {
      const closeBtnCircle = document.getElementById('close-btn');
      const modal = document.getElementById('expanded-box');
      const modalWidth = modal.clientWidth;
      const modalHeight = modal.clientHeight;
      const circleWidth = closeBtnCircle.offsetWidth;
      const circleHeight = closeBtnCircle.offsetHeight;
      const maxLeft = modalWidth - circleWidth;
      const maxTop = modalHeight - circleHeight;
      const randomLeft = Math.random() * maxLeft;
      const randomTop = Math.random() * maxTop;
      closeBtnCircle.style.position = "absolute";
      closeBtnCircle.style.left = randomLeft + "px";
      closeBtnCircle.style.top = randomTop + "px";
    }

    function showTrollMessage() {
      const trollMessageDiv = document.getElementById('troll-message');
      const funnyMessages = [
        "×”×™×™, × ×’××¨ ×”×–××Ÿ! ×¤×©×•×˜, ×ª× ×¡×• ×©×•×‘.",
        "×œ×•×–×¨! ×œ× ×”×¦×œ×—×ª× â€“ ×œ× ×¡×•×ª ×©×•×‘?",
        "×¢×•×“ × ×™×¡×™×•×Ÿ, ×¢×•×“ ×›×™×©×œ×•×Ÿ â€“ ××‘×œ ××•×œ×™ ×ª×¦×œ×™×—×• ×”×¤×¢×.",
        "××™×–×” ×›×™×©×œ×•×Ÿ ××¦×—×™×§, ×××© ×›××• ×ª××™×“!",
        "×”× ×™×¡×™×•×Ÿ ×©×œ×›×... ×˜×•×‘, ×œ× ×”×™×” ×›×œ ×›×š ××•×¦×œ×—.",
        "××•×™, ×œ× ×ª×¤×¡×ª× ××•×ª×™ â€“ ××•×œ×™ ×‘×¤×¢× ×”×‘××”, ×œ×•×–×¨!",
        "×–×” ×”×™×” ×¤×©×•×˜ ××ª×™×—×” â€“ ×ª× ×¡×• ×©×•×‘, ×× ××ª× ××¡×•×’×œ×™×.",
        "×”×›×œ × ×’××¨ ×›××Ÿ? ×œ×, ×™×© ×¢×•×“ × ×¡×™×•× ×•×ª ×œ×›×™×©×œ×•×Ÿ!",
        "×”×›×™×©×œ×•×Ÿ ×©×œ×›× ×”×•× ××•×× ×•×ª, ××‘×œ ×¢×“×™×™×Ÿ, × ×¡×• ×©×•×‘!",
        "×˜×¢×™×ª× ×©×•×‘ â€“ ×¤×©×•×˜, ×œ× × ×”×“×¨, ××‘×œ ×××© ××¦×—×™×§.",
        "×ª×¨××•, ×›×™×©×œ×•×Ÿ ××—×¨, ×‘×“×™×•×§ ×›××• ××” ×©×¦×™×¤×™× ×•.",
        "×”×××ª ×”×™×, ×œ× ×›×•×œ× × ×•×œ×“×™× ××œ×•×¤×™× â€“ ××ª× ×”×•×›×—×ª× ×–××ª.",
        "×”× ×™×¡×™×•×Ÿ ×©×œ×›× ×›××¢×˜ ××¨×©×™×, ×× ×¨×§ ×”×™×™×ª×™ ××¦×¤×” ×œ×›×š...",
        "××•×œ×™ ×”×¤×¢× ×ª×¦×œ×™×—×•? ×¡×¤×§ ×œ×.",
        "×”×›×™×©×œ×•×Ÿ ×”×–×” ×”×•× ×¢×•×“ ×¡×™××Ÿ ×©××ª× ×‘×©×˜×—.",
        "×¨×§ ××™ ×©×œ× ×× ×¡×” ×œ× × ×›×©×œ â€“ ××– ××” ××ª× ×¢×•×©×™×?",
        "×”×›×œ ××•×‘×Ÿ, ×›×©××ª× ×œ× ××¦×œ×™×—×™× ×œ× ×¦×— ××•×ª×™.",
        "×”×˜×¢×•×ª ×©×œ×›× ×©×•×‘ × ×—×©×¤×” â€“ ××•×œ×™ ×ª× ×¡×• ×©×•×‘?",
        "××”, ×œ× ×”×¤×¢× â€“ ×ª×¨×’×™×©×• ××ª ×”×›×™×©×œ×•×Ÿ ×‘×’×“×•×œ.",
        "×”××•×— ×©×œ×›× ×§×™×‘×œ ×”×¤×¡×§×”, ×•×’× ××ª× ×¢×›×©×™×• â€“ × ×¡×• ×©×•×‘.",
        "×œ×•×–×¨×™× ×›××•×›× ×¤×©×•×˜ ×¢×•×©×™× ××ª ×–×” ×©×•×‘ ×•×©×•×‘.",
        "×”××•××¥ ×©×œ×›× ×œ× ×¡×•×ª ×©×•×‘ ×¤×©×•×˜ ××¤×ª×™×¢ â€“ ××• ×©×× ××¦×—×™×§?",
        "×ª×ª×¢×•×¨×¨×•, ×ª× ×¡×• ×©×•×‘, ××•×œ×™ ×”×¤×¢× ×™×”×™×” ×©×•× ×”.",
        "×”×›×™×©×œ×•×Ÿ ×©×œ×›× ×”×•× ×¡×™××Ÿ ×œ××××¥ â€“ × ×¡×• ×¢×•×“ ×§×¦×ª.",
        "××©×•× ××”, ××ª× ×ª××™×“ ××¦×œ×™×—×™× ×œ×”×¤×ª×™×¢ ××•×ª×™ ×‘×›×™×©×œ×•×Ÿ.",
        "×”×™×™, ×–×” ×©×•×‘ ×œ× ×”×¦×œ×™×— â€“ ×—×–×¨×• ×•×”×ª×—×™×œ×• ××—×“×©.",
        "×× ×™ ××ª×¨×’×© ×œ×¨××•×ª ××ª×›× × ×•×¤×œ×™× ×©×•×‘, ×××© ×˜×•×‘.",
        "×”×›×™×©×œ×•×Ÿ ×©×œ×›× ×”×•× ×›××• ×”×¨×’×œ ×¨×¢ â€“ ×œ× × ×××¡ ×œ×¢×•×œ×.",
        "×¢×•×“ × ×™×¡×™×•×Ÿ ×›×•×©×œ â€“ ×˜×•×‘, ×œ×¤×—×•×ª ××ª× ×¢×§×‘×™×™×.",
        "×”×× ×–×• ×”×¤×¢×? ×œ×, ×›× ×¨××” ×©×œ× â€“ × ×¡×• ×©×•×‘."
      ];
      const randomMessage = funnyMessages[Math.floor(Math.random() * funnyMessages.length)];
      trollMessageDiv.textContent = randomMessage;
      trollMessageDiv.style.display = 'block';
    }

    function clearHardMode() {
      if (teleportInterval) {
        clearInterval(teleportInterval);
        teleportInterval = null;
      }
      hardModeTimeouts.forEach(timeout => clearTimeout(timeout));
      hardModeTimeouts = [];
      hardModeActive = false;
    }

    function closeModal() {
      const expandedBox = document.getElementById('expanded-box');
      expandedBox.classList.remove('show');
      clearHardMode();
      const closeBtnCircle = document.getElementById('close-btn');
      closeBtnCircle.classList.remove('show');
      closeBtnCircle.style.position = "";
      closeBtnCircle.style.left = "";
      closeBtnCircle.style.top = "";
      if (keyListenerAdded) {
        document.removeEventListener('keydown', spaceHandler);
        keyListenerAdded = false;
      }
      if(currentAudio){
        currentAudio.pause();
        currentAudio.currentTime = 0;
        currentAudio = null;
      }
    }
  </script>
</body>
</html>
